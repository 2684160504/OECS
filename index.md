# OECS: Towards Online Extrinsics Correction for the Surround-view System


# 1. Prerequisites
We have tested the library in **Ubuntu 14.04**, but it should be easy to compile in other platforms.

## C++11 or C++0x Compiler
We use the new thread and chrono functionalities of C++11.

## Pangolin
We use [Pangolin](https://github.com/stevenlovegrove/Pangolin) for visualization and user interface. Dowload and install instructions can be found at: https://github.com/stevenlovegrove/Pangolin.

## OpenCV
We use [OpenCV](http://opencv.org) to manipulate images and features. Dowload and install instructions can be found at: http://opencv.org. **We use 3.4.1, but it should also work for other version at least 3.0**.

## Eigen3
Download and install instructions can be found at: http://eigen.tuxfamily.org.

## g2o
We use [g2o](https://github.com/RainerKuemmerle/g2o) library to perform non-linear optimizations.

# 2. Building the project
We use CMake to build the project on ubuntu 14.04.
```
cd SurroundView-System/
mkdir build
cd build
cmake ..
make
```
There has been no rules for "make install" yet, so if you want to use the library in other project, maybe you can copy the headers and the lib file to system path by hand.

# 3. Run the project
After compile and build the project, some executable files will be stored in the ./bin/ .


**For the calibrate process:**
```
./bin/calibrate  PATH_TO_CALIBRATE_FRAMES  PATH_TO_CONFIG_FILE
For example:
./bin/calibrate  ~/Documents/calibrate_images/  ./config/default.yaml
Then 2 data files, 'cameras.k' and 'points.k', will be saved in the ./data/.
'cameras.k' stores extrinsics of 4 cameras
'points.k' stores the position of all 3d feature points in the calibrate process.
```
**The calibrate frames should be stored as**
```
string sLFPathF = "PATH_TO_CALIBRATE_FRAMES/LF/LF_F";
string sLFPathL = "PATH_TO_CALIBRATE_FRAMES/LF/LF_L";
string sBLPathL = "PATH_TO_CALIBRATE_FRAMES/BL/BL_L";
string sBLPathB = "PATH_TO_CALIBRATE_FRAMES/BL/BL_B";
string sRBPathB = "PATH_TO_CALIBRATE_FRAMES/RB/RB_B";
string sRBPathR = "PATH_TO_CALIBRATE_FRAMES/RB/RB_R";
string sFRPathR = "PATH_TO_CALIBRATE_FRAMES/FR/FR_R";
string sFRPathF = "PATH_TO_CALIBRATE_FRAMES/FR/FR_F";
```
**For the mapping process:**
```
This process will take in 4 images and generate the birds-eye surround view image.
./bin/mapping  FRONT_IMAGE_PATH  LEFT_IMAGE_PATH  BACK_IMAGE_PATH  RIGHT_IMAGE_PATH
For example:
./bin/mapping  ~/Documents/ALL/001031F.jpg  ~/Documents/ALL/001031L.jpg  ~/Documents/ALL/001031B.jpg  ~/Documents/ALL/001031R.jpg
```
**The correct 'cameras.k' and 'points.k' files which are generated by the calibrate process should be stored in the ./data/**

